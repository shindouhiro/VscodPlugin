// The module 'vscode' contains the VS Code extensibility API
// Import the module and reference it with the alias vscode in your code below
import * as vscode from 'vscode';
import * as path from 'path';
import * as fs from 'fs';

let iconsCache: Record<string, { body: string; width?: number; height?: number }> = {};

function loadIcons(context: vscode.ExtensionContext): Record<string, { body: string; width?: number; height?: number }> {
  if (Object.keys(iconsCache).length > 0) {return iconsCache;}
  // 兼容打包后out目录和开发时src目录
  let iconsPath = path.join(context.extensionPath, 'out', 'my-icons.json');
  if (!fs.existsSync(iconsPath)) {
    iconsPath = path.join(context.extensionPath, 'src', 'my-icons.json');
  }
  
  console.log('加载图标文件路径:', iconsPath);
  try {
    const raw = fs.readFileSync(iconsPath, 'utf-8');
    const json = JSON.parse(raw);
    iconsCache = json.icons || {};
    console.log('成功加载图标数量:', Object.keys(iconsCache).length);
    return iconsCache;
  } catch (e) {
    console.error('Failed to load my-icons.json from', iconsPath, e);
    return {};
  }
}

export function activate(context: vscode.ExtensionContext) {
  console.log('extension activated');
  const icons = loadIcons(context);
  const hoverProvider = vscode.languages.registerHoverProvider(
    [
      { language: 'html', scheme: 'file' },
      { language: 'vue', scheme: 'file' }
    ],
    {
      provideHover(document, position, token) {
        const range = document.getWordRangeAtPosition(position, /[\w\-]+/);
        if (!range) {return;}
        // 获取当前行文本
        const line = document.lineAt(position.line).text;
        // 匹配class属性内容
        const classAttrMatch = line.match(/class\s*=\s*(["'])(.*?)\1/);
        if (!classAttrMatch) {return;}
        const classList = classAttrMatch[2].split(/\s+/);
        // 找到所有my-icons-xxx
        const iconClasses = classList.filter(cls => cls.startsWith('my-icons-'));
        if (iconClasses.length === 0) {return;}
        const md = new vscode.MarkdownString();
        md.supportHtml = true;
        md.isTrusted = true;
        
        console.log('找到图标类:', iconClasses);
        console.log('已加载图标数量:', Object.keys(icons).length);
        
        for (const cls of iconClasses) {
          const key = cls.replace('my-icons-', '');
          const icon = icons[key];
          console.log(`查找图标: ${key}`, icon ? '找到' : '未找到');
          if (!icon) {
            md.appendMarkdown(`**${cls}** - 图标未找到\n`);
            continue;
          }
          // 测试简单SVG
        

        
          // 调试输出
          console.log('图标数据:', JSON.stringify(icon).substring(0, 100) + '...');
          // 固定http/https SVG图片URL测试
          const svgLogoBase64 = 'PHN2ZyB0PSIxNzUyMDUxMjAwMDIxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE3MTIiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMjQ5LjYyMTk0MyA5NTAuNTA2MDU3czE1Ni43Njg1NDktNy44MzUwNjMgMjYwLjk1MzIzNC04Ljc4NTkyYzExNS43NTg4MTEtMS4wNjIwMzQgMzAwLjE2MzY1NyA4Ljc4NTkyIDMwMC4xNjM2NTcgOC43ODU5MmwxOTEuMzE4MzA5IDIxLjYzMjczMnMtMjk4Ljg5NjgyMyAxNy43MTIyNzQtNDkxLjQ4MTk2NiAxNy41Nzc2OTFDMzIxLjY4MjI4NiA5ODkuNTg0ODIzIDQ2LjgxMTQyOSA5NzIuMTM4Nzg5IDQ2LjgxMTQyOSA5NzIuMTM4Nzg5bDIwMi44MTA1MTQtMjEuNjMyNzMyeiIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iLjUiIHAtaWQ9IjE3MTMiPjwvcGF0aD48cGF0aCBkPSJNMTUxLjM2NzY4IDE3NC40MzEwODZjLTE0Ljc4OTQ4NiA3NS43NzMwNzQtMTMuODAwNTk0IDE3Mi4yNTE0MjktOC4wNTE1NjYgMjQ3LjIxNzAwNWwwLjQwMDgyMyA1LjIxMDY5OC0yLjk5NTkzMSA0LjI4NjE3MWMtNTYuMjQxMDA2IDgwLjQ4MDU0OS03NC4yMDQ4OTEgMTczLjI0NjE3MS02MC41ODI3NjYgMjM3LjI2MDggMjcuNjU2Nzc3IDEyOS45OTI0MTEgMTQyLjE4OTcxNCAxOTMuOTY2MDggMjA3LjQ1MzYyMyAyMjAuNTU0OTcxIDUyLjkwODYxNyAyMS41NTY2NjMgMTQ0LjY2MTk0MyA0My4wNjk0NCAyNDYuMzEwMDM0IDQxLjkzNzE4OSAxMDEuNTg2NjUxLTEuMTI5MzI2IDIxMS42NTc4NzQtMjQuODQ4MDkxIDMwMi42MDY2MjktOTIuMjAwOTYgNTguMjE1ODYzLTQzLjExMDQgOTEuMzcwMDU3LTExNy44MzAyMTcgOTguMjQyNTYtMTk2LjQ3NjM0MyA2Ljg3ODM1NC03OC42OTg3ODktMTIuODQ2ODExLTE1OC4yNjA2NjMtNTYuNTE2MDIzLTIxMC4wMjI0bC0zLjc1MDc2Ni00LjQ0NzA4NiAwLjMyNzY4LTUuODEwNDY4YzEwLjk1Mzg3NC0xOTMuNjQ0MjUxLTExLjQxMzIxMS0yODYuOTM2NTAzLTQwLjE2NDIwNi0zMjkuOTU2MjA2LTEzLjkxNzYyMy0yMC44MjUyMzQtMjkuMTM0MjYzLTI5LjU3ODk3MS00My4wNjM1ODgtMzIuOTE3MjExLTE0LjQxNzkyLTMuNDU4MTk0LTI4Ljk5Njc1NC0xLjQ4MDQxMS00MS44MDU1MzIgMS44OTAwMTEtNi41NTY1MjYgMS43MjYxNzEtMTcuODc5MDQgOC41NzIzNDMtMzIuOTgxNTc3IDIxLjE1NTg0LTE0LjUyMDMyIDEyLjEwMDc1NC0zMC44ODA5MTQgMjguMDY5MzAzLTQ3LjI1OTA2MyA0NS42OTM4MDYtMzIuODY3NDc0IDM1LjM1NzI1Ny02NC42NjcwNjMgNzYuMTI3MDg2LTgwLjk0ODY2MiAxMDMuNDA5MzcxbC01Ljc5NTg0IDkuNzEzMzcyLTEwLjg2MDI1Mi0zLjE2NTYyM2MtMjIuNTEwNDQ2LTYuNTYyMzc3LTUxLjU5Nzg5Ny05LjU3NTg2My03OS42OTM1MzEtMTAuMDUyNzU0LTI4LjA2MzQ1MS0wLjQ3Mzk2Ni01My45MDkyMTEgMS42MDAzNjYtNjkuNjQwNzc3IDQuNjIyNjI4bC0xMC43NTc4NTIgMi4wNjU1NTQtNS4wMDg4MjMtOS43NDI2MjhjLTM0Ljk2NTIxMS02Ny45OTA2NzQtNzMuMTk4NDQ2LTEwOS43NTIzMi0xMDQuNDAxMTg4LTEzNC42MDMzMzctMzEuNzQxMDc0LTI1LjI4NDAyMy01NS40NDIyODYtMzIuNTE5MzE0LTYxLjAzNjI1Mi0zMy4wNzIyNzUtMjMuNTA4MTE0LTIuMzIzMDE3LTQxLjQ5NTQwNiA3LjM2Njk0OS01Ni4yMjA1MjUgMjcuMzg0Njg2LTE1LjI3MjIyOSAyMC43NTc5NDMtMjYuMzg3MDE3IDUyLjAzNjc1NC0zMy44MDY2MjkgOTAuMDY1MTg5eiBtMTAuMjQtMTA3LjQwMjk3MmMxOS41ODQ3MzEtMjYuNjI0IDQ2LjkyODQ1Ny00Mi42OTIwMjMgODIuNjY2MDU3LTM5LjE2MzYxMSAxMy4zMzI0OCAxLjMxNjU3MSA0Mi4yNzk0OTcgMTIuMTM4Nzg5IDc2LjM4NDU0OSAzOS4zMDQwNDYgMzMuMDkyNzU0IDI2LjM2MDY4NiA3MS44MTE2NTcgNjguNjY2NTE0IDEwNy4yMzMyOCAxMzQuNjcwNjI4IDE3LjYzMzI4LTIuNDM0MTk0IDQwLjc2Mzk3Ny0zLjc4ODggNjQuODQyNjA1LTMuMzgyMTI2IDI1LjQwMTA1MSAwLjQzMzAwNiA1Mi43Nzk4ODYgMi44MzIwOTEgNzYuNTY1OTQzIDguMzkwOTQ5IDE4LjYwMTY5MS0yOC44MTUzNiA0OC41Mzc2LTY2LjM5NjE2IDc4LjgwNzA0LTk4Ljk2MjI4NiAxNi44OTMwNzQtMTguMTcxNjExIDM0LjE3MjM0My0zNS4wOTM5NDMgNDkuOTYyNDIzLTQ4LjI1MDg4IDE1LjIxMDc4OS0xMi42NzEyNjkgMzAuODcyMTM3LTIzLjQ0NjY3NCA0NC4yNjYwNTctMjYuOTY5MjM0IDE0Ljk4NTUwOS0zLjk0Mzg2MyAzNC45NjUyMTEtNy4xMDk0ODYgNTYuMDY4Mzg5LTIuMDQ4IDIxLjU4ODg0NiA1LjE3NTU4OSA0Mi44NTI5MzcgMTguNjAxNjkxIDYwLjU3MTA2MyA0NS4xMTE1ODkgMzQuMTc4MTk0IDUxLjE0MTQ4NiA1NS42MDkwNTEgMTUxLjY0ODU0OSA0NS4zNjMyIDM0Mi4xNTY0MzQgNDcuMjQ0NDM0IDU5LjExNjk4MyA2Ni43MzU1NDMgMTQ0Ljc2NzI2OSA1OS41NTg3NjUgMjI2Ljg4MzI5MS03LjM2Njk0OSA4NC4yOTg2MDYtNDMuMTI1MDI5IDE2Ny45MzMwNzQtMTA5Ljk3NDY3NCAyMTcuNDQyMDEyLTk3LjQzNTA2MyA3Mi4xNTEwNC0yMTQuMTc5ODQgOTYuNzY4LTMxOS42OTU3MjYgOTcuOTQxMjExLTEwNS40NDg1OTQgMS4xNzYxMzctMjAxLjA3MjY0LTIxLjAzNTg4Ni0yNTcuNjczNTA4LTQ0LjA5NjM2Ni02Ny4yMzg3NjYtMjcuMzkzNDYzLTE5NC4xNzY3MzEtOTYuNTMzOTQzLTIyNS4wMzQyNC0yNDEuNTU4Njc0LTE1LjMzMDc0My03Mi4wNjMyNjkgNC40OTk3NDktMTcwLjgzMjQ1NyA2Mi4yMzg3Mi0yNTUuNzgzNDk3LTUuNDc5ODYzLTc1LjIyMDExNC02LjI5MDI4Ni0xNzIuMDc4ODExIDguODk0MTcxLTI0OS44ODUyNTcgNy43Mzg1MTQtMzkuNjYzOTA5IDE5LjkxMjQxMS03NS45MTM1MDkgMzguOTUyOTYtMTAxLjgwMDIyOXoiIGZpbGw9IiM3QzQwMDAiIHAtaWQ9IjE3MTQiPjwvcGF0aD48cGF0aCBkPSJNMjQyLjgzNDI4NiA1NC4xMjU3MTRjLTExNS43NDQxODMtMTEuNDQ1Mzk0LTExNy45MjA5MTQgMjIzLjMyODU0OS0xMDYuNjE1OTU1IDM3MC44NjY0NjktNTYuNzkzOTY2IDgxLjM1NTMzNy03NS43MTQ1NiAxNzYuMDQ5MDA2LTYxLjQ0NTg1MSAyNDMuMTgyNDQ2IDI4LjU3ODM3NyAxMzQuNDY1ODI5IDE0Ni41MTY4NDYgMTk5LjU1MTI2OSAyMTEuMjMzNjQ2IDIyNS45NDcwNjIgMTA2Ljk2NzA0IDQzLjYyNTMyNiAzNjYuMDc0MTQ5IDg1LjUxNTcwMyA1NTAuMDg5ODc0LTUwLjkwNDUwMiAxMjIuMTY5MDUxLTkwLjU2ODQxMSAxMzQuNjMyNTk0LTMwOS43MDQ0MTEgNDMuMTc3NjkxLTQxOC4yMjUwMDZDOTAwLjcwNzQ3NCA0NS43MTcyMTEgODAxLjgyMTI1NyA0NC4yMTA0NjkgNzQ3LjUyIDU4LjUxNDI4NmMtMzguOTc5MjkxIDEwLjI2OTI1Ny0xMzUuMDMzNDE3IDEyMS4zMTE4MTctMTY4LjIyODU3MSAxNzcuMDA1NzE0LTQ3LjQyODc1NC0xMy44Mzg2MjktMTMwLjYwMDk2LTExLjU1OTQ5Ny0xNjMuODQtNS4xNjk3MzdDMzQ1LjQwOTgyOSA5NC4wMDYxMjYgMjYxLjMyMTg3NCA1NS45NTQyODYgMjQyLjgzNDI4NiA1NC4xMjU3MTR6IiBmaWxsPSIjRkJBRjVFIiBwLWlkPSIxNzE1Ij48L3BhdGg+PHBhdGggZD0iTTMwMS4zNDg1NzEgNTYwLjI3NDI4NmM0MS42MzU4NCA4Ljc2NTQ0IDYyLjkwMjg1NyA2LjYwOTE4OSA3OC45OTQyODYtMi45MjU3MTUgMjYuMzMxNDI5LTEyLjY3NzEyIDU1LjQ0NTIxMS00Mi40MjI4NTcgMTIyLjg4LTQyLjQyMjg1NyA3My4xNDI4NTcgMCAxMDYuNzg4NTcxIDI3Ljc5NDI4NiAxMjguNzMxNDI5IDQyLjQyMjg1NyA3Ljc1MzE0MyA1LjE2OTczNyAzMy42NDU3MTQgOS4yMTAxNDkgNTcuMDUxNDI4IDcuMzE0Mjg2IDU0LjEyNTcxNC00LjM4ODU3MSAxMjIuODgtOTguMDExNDI5IDIwNi4yNjI4NTctMjQuODY4NTcxIDMxLjQ1MTQyOSAyNy41ODk0ODYgNDkuMjM2ODQ2IDE2MS43NTEwNC0zMi4xODI4NTcgMjY2LjI0LTg3Ljc3MTQyOSAxMTIuNjQyOTI2LTI3Ni40OCAxMjUuODA1NzE0LTM0NS4yMzQyODUgMTI1LjgwNTcxNC0xMzYuMTE1OTMxIDAtMjU4LjkyNTcxNC0zOC4wMzQyODYtMzExLjU4ODU3Mi04MC40NTcxNDNTNjEuMDUzODA2IDY3Ny42NTM5NDMgMTAyLjQgNTg4LjA2ODU3MWM1Mi42NjI4NTctMTE0LjEwMjg1NyAxNzEuMTU0Mjg2LTMzLjY0NTcxNCAxOTguOTQ4NTcxLTI3Ljc5NDI4NXoiIGZpbGw9IiNGRkZGRkYiIHAtaWQ9IjE3MTYiPjwvcGF0aD48cGF0aCBkPSJNNjcwLjgxMzYyMyA2NjcuODg0OTgzYTExLjcwMjg1NyAxMS43MDI4NTcgMCAwIDAtMjIuMTYyMjg2LTcuNTI0OTM3Yy0xLjIzNDY1MSAzLjYzMzczNy00LjM3Mzk0MyA4LjI1MDUxNC05Ljg0NTAyOCAxMy4yMDA4MjMtNS4zNTk5MDkgNC44NTA4MzQtMTIuMzU1MjkxIDkuNDczNDYzLTIwLjIzNDI0IDEzLjI3MTA0LTE2LjEyNjUzNyA3Ljc3OTQ3NC0zMy43NDgxMTQgMTEuMTAwMTYtNDYuNDY2MTk1IDguMTUxMDQtMzguMzA5MzAzLTguODgyNDY5LTc3LjAxMzU3Ny0xMy43Mjc0NTEtMTI1LjQxOTUyLTAuMjI1MjgtMjAuNTc2NTQ5IDUuNzQwMjUxLTM2LjQ4OTUwOSAwLjQ3Njg5MS00OC4zODI1MzctNy41Mzk1NjYtMTIuMjU1ODE3LTguMjU5MjkxLTIwLjE2NDAyMy0xOS40NjQ3NzctMjMuMjUzNTc3LTI0LjYxOTg4NmExMS43MDI4NTcgMTEuNzAyODU3IDAgMSAwLTIwLjA3NjI1MSAxMi4wMzA1MzdjNC4wNzg0NDYgNi44MDUyMTEgMTQuMTE5NDk3IDIxLjEyOTUwOSAzMC4yNTE4ODUgMzIuMDAxNDYzIDEwLjY4MTc4MyA3LjE5NzI1NyAyNC4wNTgxNDkgMTIuODY0MzY2IDM5Ljg1NzAwNiAxMy44MTgxNDkgMC40MTU0NTEgMC4xODEzOTQgMC44NDg0NTcgMC4zMzM1MzEgMS4zMDE5NDMgMC40NTA1NiA1Ny4xOTQ3ODkgMTUuMDUyOCA5Ni43MTUzMzcgMTQuOTU5MTc3IDE2NS4xODg3NTQtMS40MTMxMiAwLjc2MzYxMS0wLjE4NDMyIDEuNDgwNDExLTAuNDU5MzM3IDIuMTM4Njk3LTAuODE2Mjc1IDEyLjE2NTEyLTEuNjE3OTIgMjQuMzMzMTY2LTUuNTk2ODkxIDM1LjAyOTU3Ny0xMC43NTQ5MjUgOS41NjQxNi00LjYxMzg1MSAxOC41MDUxNDMtMTAuNDI0MzIgMjUuNzY5NjkyLTE2Ljk5ODQgNy4xNTYyOTctNi40Nzc1MzEgMTMuMzI5NTU0LTE0LjI4MDQxMSAxNi4zMDIwOC0yMy4wMzEyMjN6IG0tMTMzLjYxNDQ0NiA0NC4xOTU4NGMtMjAuMTkzMjgtMi44OTM1MzEtNDAuNjkwODM0LTMuNDE3MjM0LTYzLjM4ODUyNiAwLjUwMzIyMyAyMC42MjYyODYgMi41OTUxMDkgNDAuNTAzNTg5IDIuNDc1MTU0IDYzLjM4ODUyNi0wLjUwMzIyM3pNNjEwLjA4NDU3MSA0OTQuNzE0ODhjLTIuMzM0NzIgMTMuMTg5MTIgOS4xMDE4OTcgMTAuNzUyIDI0LjA1ODE0OSA3LjU2NTg5NyA5LjQ3OTMxNC0yLjAxODc0MyAyMC4zNzE3NDktNC4zNDE3NiAzMC4wNjc1NjYtMy4xNzczMjYgMTUuOTk0ODggMS45MTkyNjkgMjkuNDcwNzIgNi4zNTc1NzcgMzkuODE2MDQ1IDkuNzYzMTA5IDEzLjMxMiA0LjM4MjcyIDIxLjQzOTYzNCA3LjA1OTc0OSAyMy4wODY4MTIgMC40NzY4OTEgMS40NjI4NTctMTMuMTY1NzE0LTIyLjcyMTA5Ny0zMS40MDQ2MTctNTAuNzQ5NDQtMzYuMzYzNzAyLTI4LjAyODM0My00Ljk2MjAxMS02Mi40NjY5MjYgMC4xOTAxNzEtNjYuMjc5MTMyIDIxLjczNTEzMXpNNDA2LjY3NDI4NiA0OTUuOTA4NTcxYzIuMzM0NzIgMTMuMTg5MTItOS4xMDE4OTcgMTAuNzUyLTI0LjA1ODE0OSA3LjU2NTg5OC05LjQ3OTMxNC0yLjAxODc0My0yMC4zNzE3NDktNC4zNDE3Ni0zMC4wNjc1NjYtMy4xNzczMjYtMTUuOTk0ODggMS45MTkyNjktMjkuNDcwNzIgNi4zNTc1NzctMzkuODE4OTcxIDkuNzY2MDM0LTEzLjMwOTA3NCA0LjM4MjcyLTIxLjQzOTYzNCA3LjA1OTc0OS0yMy4wODM4ODYgMC40NzM5NjYtMS40NjI4NTctMTMuMTY1NzE0IDIyLjcyMTA5Ny0zMS40MDQ2MTcgNTAuNzQ5NDQtMzYuMzYzNzAzIDI4LjAyODM0My00Ljk2MjAxMSA2Mi40NjQgMC4xOTAxNzEgNjYuMjc5MTMyIDIxLjczNTEzMXogbTEwNS45Mjg0MTEgMTQzLjE3NTY4YzMzLjYwNDc1NCAwIDYwLjg0NjA4LTMxLjA3NDAxMSA2MC44NDYwOC01Mi43MzAxNDggMC0yMS42NTYxMzctMjcuMjQxMzI2LTMzLjM1ODk5NC02MC44NDYwOC0zMy4zNTg5OTQtMzMuNjAxODI5IDAtNjAuODQzMTU0IDExLjcwMjg1Ny02MC44NDMxNTQgMzMuMzU4OTk0IDAgMjEuNjU2MTM3IDI3LjI0MTMyNiA1Mi43MzAxNDkgNjAuODQzMTU0IDUyLjczMDE0OHoiIGZpbGw9IiM1QTJGMDAiIHAtaWQ9IjE3MTciPjwvcGF0aD48cGF0aCBkPSJNNDkyLjY0OTMyNiA1NzMuNzE1MDE3YzAuODE2Mjc0IDIuNDgzOTMxLTMuNDA4NDU3IDYuMTA1OTY2LTkuNDM1NDI5IDguMDg5Ni02LjAyOTg5NyAxLjk4MzYzNC0xMS41Nzk5NzcgMS41Nzk4ODYtMTIuMzk2MjUxLTAuOTAxMTItMC44MTkyLTIuNDgzOTMxIDMuNDA1NTMxLTYuMTAzMDQgOS40MzU0MjgtOC4wODk2IDYuMDI5ODk3LTEuOTgzNjM0IDExLjU3OTk3Ny0xLjU3OTg4NiAxMi4zOTYyNTIgMC45MDExMnoiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9Ii42IiBwLWlkPSIxNzE4Ij48L3BhdGg+PHBhdGggZD0iTTQwOC4xMzcxNDMgNDUwLjU2YzE2Ljk2NjIxNyAwIDMwLjcyLTEzLjc1Mzc4MyAzMC43Mi0zMC43MnMtMTMuNzUzNzgzLTMwLjcyLTMwLjcyLTMwLjcyLTMwLjcyIDEzLjc1Mzc4My0zMC43MiAzMC43MiAxMy43NTM3ODMgMzAuNzIgMzAuNzIgMzAuNzJ6IG0yMTYuNTAyODU3IDBjMTYuOTY2MjE3IDAgMzAuNzItMTMuNzUzNzgzIDMwLjcyLTMwLjcycy0xMy43NTM3ODMtMzAuNzItMzAuNzItMzAuNzItMzAuNzIgMTMuNzUzNzgzLTMwLjcyIDMwLjcyIDEzLjc1Mzc4MyAzMC43MiAzMC43MiAzMC43MnoiIGZpbGw9IiNGRkZGRkYiIHAtaWQ9IjE3MTkiPjwvcGF0aD48cGF0aCBkPSJNNzc5LjcwMjg1NyA1NTIuOTZjMzEuNTA5OTQzIDAgNTcuMDUxNDI5LTEwLjQ3OTkwOSA1Ny4wNTE0MjktMjMuNDA1NzE0cy0yNS41NDE0ODYtMjMuNDA1NzE0LTU3LjA1MTQyOS0yMy40MDU3MTUtNTcuMDUxNDI5IDEwLjQ3OTkwOS01Ny4wNTE0MjggMjMuNDA1NzE1IDI1LjU0MTQ4NiAyMy40MDU3MTQgNTcuMDUxNDI4IDIzLjQwNTcxNHogbS01MzUuNDA1NzE0IDBjMzEuNTA5OTQzIDAgNTcuMDUxNDI5LTEwLjQ3OTkwOSA1Ny4wNTE0MjgtMjMuNDA1NzE0cy0yNS41NDE0ODYtMjMuNDA1NzE0LTU3LjA1MTQyOC0yMy40MDU3MTUtNTcuMDUxNDI5IDEwLjQ3OTkwOS01Ny4wNTE0MjkgMjMuNDA1NzE1IDI1LjU0MTQ4NiAyMy40MDU3MTQgNTcuMDUxNDI5IDIzLjQwNTcxNHoiIGZpbGw9IiNGRjhGOEUiIHAtaWQ9IjE3MjAiPjwvcGF0aD48cGF0aCBkPSJNNjg1LjU3Njc3NyA3ODkuODYwOTM3YzcuODA1ODA2LTMuOTU1NTY2IDEzLjQ0NjU4My05LjA1ODAxMSAxNy44ODQ4OTItMTMuNDM0ODggMS4yNDM0MjktMS4yMjg4IDIuMzM0NzItMi4zMjg4NjkgMy4zMjM2MTEtMy4zMjk0NjNsMC4wMDI5MjYtMC4wMDI5MjVjMi44NTg0MjMtMi44OTA2MDYgNC44NjgzODktNC45MTgxMjYgNy4yNzMzMjUtNi42Mzg0NDYgMi41NTQxNDktMS44Mjg1NzEgNS4wMzgwOC0yLjg0OTY0NiA4LjczNjE4My0yLjg0Mzc5NCA0LjE1MTU4OSAwLjAwNTg1MSAxMC41NzkzODMgMS4zMjI0MjMgMjAuNzI1NzYgNS45OTQ3ODggMTguNjY2MDU3IDguNTk1NzQ5IDM1LjE3ODc4OSA1Ljk2NTUzMSA0OC4wMDgwNDYgMy45MjMzODNsMC42NDk1MDktMC4xMDUzMjZjMTMuMzE0OTI2LTIuMTE1MjkxIDIyLjA2MjgxMS0zLjIxODI4NiAzMS43NDk4NTEgMi4wNDggNy41NTEyNjkgNC4xMDc3MDMgMTAuMjc1MTA5IDkuNDc5MzE0IDE0LjkzODY5NyAxOC42NzE5MDkgMC41MjM3MDMgMS4wMjY5MjYgMS4wNjc4ODYgMi4xMDM1ODkgMS42NDcxNzcgMy4yMjk5ODggNS44NTcyOCAxMS4zOTI3MzEgMTQuMDI1ODc0IDI0LjM2NTM0OSAzNC44NDIzMzIgMzIuODMyMzY2IDE1LjA3OTEzMSA2LjEzMjI5NyAyNC4yNDUzOTQgMTUuNDgyODggMjkuMzAzOTU0IDI2LjA5NDQ0NiA1LjE1MjE4MyAxMC44MDE3MzcgNi40NTEyIDIzLjc4MDIwNiA0LjExOTQwNiAzNy40NzU0NzQtMC45MjE2IDUuNDA5NjQ2LTUuMTg0MzY2IDE1LjgzOTgxNy0xMy43NDUwMDYgMjguNDg0NzU0LTguMzY3NTQzIDEyLjM1NTI5MS0yMC4yMzEzMTQgMjUuOTI3NjgtMzUuMjg3MDQgMzcuNzcwOTcyLTI5Ljk0NDY4NiAyMy41NTQ5MjYtNzIuMTkyIDQwLjExNzM5NC0xMjUuMzQ5MzAzIDI3LjM0NjY1MS01NC41OTA5MDMtMTMuMTE1OTc3LTg1LjQxNjIyOS0zOS42MTQxNzEtMTAxLjUzMTA2My02Ny4wMTM0ODUtMTYuMzIyNTYtMjcuNzUzMzI2LTE4LjA2OTIxMS01Ny4yNjIwOC0xMy4wODA4NjgtNzYuOTgxMzk1IDUuMDMyMjI5LTE5Ljg5MTkzMSAxMy4wMjgyMDYtMjguMzMyNjE3IDIyLjYzMzMyNS0zNC4xNTQ3ODggNS4yOTU1NDMtMy4yMDk1MDkgMTEuMzQ4ODQ2LTUuNzY5NTA5IDE4Ljc3MTM4My04Ljc1NjY2M2wyLjE0MTYyMy0wLjg1NzIzNGM2LjcxNDUxNC0yLjY5MTY1NyAxNC4zMzYtNS43NDYxMDMgMjIuMjQxMjgtOS43NTQzMzJ6IG02Ny43MzYxMzctNDEuNTE1ODg2Yy0xMS43MTc0ODYtNS4zOTUwMTctMjEuNjM4NTgzLTguMTI3NjM0LTMwLjQ4NTk0My04LjEzOTMzNy05LjMwMDg0Ni0wLjAxMTcwMy0xNi40Njg4NDYgMi45ODEzMDMtMjIuMzg0NjQgNy4yMTE4ODYtNC4xOTI1NDkgMi45OTg4NTctOC4wODY2NzQgNi45NTE0OTctMTEuMjI4ODkxIDEwLjE0MDUyNmwtMC4wMDg3NzcgMC4wMTE3MDNjLTAuNzc1MzE0IDAuNzg3MDE3LTEuNTA2NzQzIDEuNTI3MjIzLTIuMTgyNTgzIDIuMTk0Mjg1LTMuODMyNjg2IDMuNzgyOTQ5LTcuNDM3MTY2IDYuODkyOTgzLTEyLjAyNzYxMSA5LjIyMTg1Mi02LjkzNjg2OSAzLjUxMzc4My0xMy42MTYyNzQgNi4xOTM3MzctMjAuNDI0NDEyIDguOTI2MzU0bC0yLjExMjM2NiAwLjg0ODQ1N2MtNy4zMzE4NCAyLjk0OTEyLTE1LjA0MTA5NyA2LjEzMjI5Ny0yMi4xNjgxMzcgMTAuNDUzNTc3LTE1LjI0ODgyMyA5LjI0MjMzMS0yNi43NjQ0MzQgMjMuMDMxMjIzLTMzLjE5MjIyOCA0OC40MjkzNDktNi40Njg3NTQgMjUuNTczNjY5LTMuOTA1ODI5IDYxLjQyMjQ0NiAxNS41OTY5ODMgOTQuNTg1NDE3IDE5LjcxMzQ2MyAzMy41MTY5ODMgNTYuMjMyMjI5IDYzLjQ5MDkyNiAxMTYuMjQxNTU0IDc3LjkwODg0NiA2MS40NDU4NTEgMTQuNzYwMjI5IDExMC44Nzg3Mi00LjY0NjAzNCAxNDUuMjg1MTItMzEuNzExODE3IDE3LjEyMTI4LTEzLjQ2NzA2MyAzMC42MDAwNDYtMjguODY4MDIzIDQwLjE5NjM4OC00My4wNDMxMDkgOS40MDAzMi0xMy44ODgzNjYgMTUuNzE0MDExLTI3LjU0ODUyNiAxNy40NDAxODMtMzcuNjgwMjc0IDIuOTU3ODk3LTE3LjM4NzUyIDEuNTc5ODg2LTM1LjQzNjI1MS02LjA2NzkzMS01MS40NzUwMTctNy43MzU1ODktMTYuMjI2MDExLTIxLjQ5MjI5Ny0yOS41MjA0NTctNDEuNjEyNDM0LTM3LjcwMzY4LTEzLjU0ODk4My01LjUwOTEyLTE4LjI4Mjc4OS0xMi45NzU1NDMtMjIuODQzOTc4LTIxLjg1MjE2LTAuNDk3MzcxLTAuOTY4NDExLTEuMDA2NDQ2LTEuOTkyNDExLTEuNTMzMDc0LTMuMDU3MzcybC0wLjAwODc3Ny0wLjAxNzU1NGMtNC40MjA3NTQtOC45MjYzNTQtMTAuMzUxMTc3LTIwLjg5NTQ1MS0yNC42ODEzMjYtMjguNjg2NjI5LTE3LjExMjUwMy05LjMwMzc3MS0zMy4xNDU0MTctNi43NDY2OTctNDUuNzQzNTQzLTQuNzM2NzMxbC0wLjg2MzA4NSAwLjEzNzUwOGMtMTMuMTE4OTAzIDIuMDg2MDM0LTIzLjMxNzk0MyAzLjUwMjA4LTM1LjE5MDQ5Mi0xLjk2NjA4eiBtLTYxMi44NjY5MjUgMTkzLjMzMTJjLTAuMzIxODI5LTI3LjQwODA5MSA2LjE5MzczNy02Ni4wNTY3NzcgMjUuNDI0NDU3LTkzLjYyODcwOCA5LjQyMDgtMTMuNTAyMTcxIDIxLjY3MDc2Ni0yNC4wNjY5MjYgMzcuNTYwMzItMjkuODIxODA2IDE1LjkwNzEwOS01Ljc2MDczMSAzNi43NDQwNDYtNy4xNTkyMjMgNjQuMDkzNjIzLTAuMTI1ODA2IDU1LjU2MjI0IDE0LjI4OTE4OSA4NS4xMTQ4OCA0Mi4yNDczMTQgMTAwLjM5ODgxMSA2Ny40NDY0OTIgNy43Mzg1MTQgMTIuNzU2MTE0IDExLjk0Mjc2NiAyNS4wMTQ4NTcgMTMuOTE3NjIzIDM0Ljc5NTUyIDAuOTg4ODkxIDQuODkxNzk0IDEuMzk1NTY2IDkuMDQwNDU3IDEuNDQ1MzAzIDEyLjIwMDIyOCAwLjA0OTczNyAzLjE3NzMyNi0wLjI3MjA5MSA0LjY3MjM2Ni0wLjMwNzIgNC44MzAzNTVsLTAuMDAyOTI2IDAuMDE0NjI4Yy0yLjU4MzQwNiA4LjA3Nzg5Ny01LjY5OTI5MSAxNC4zMTI1OTQtMTAuMDkwNzg5IDE3LjYyNzQyOS0zLjEzMzQ0IDIuMzY2OTAzLTkuODI3NDc0IDUuNDEyNTcxLTI1LjU5NzA3NC0wLjUwMDI5N2wtMTMuMjg4NTk0LTQuOTgyNDkyLTUuMzgzMzE0IDEzLjEzMDYwNmMtNC4wMTExNTQgOS43ODA2NjMtMTEuNDk4MDU3IDIwLjA4NTAyOS0xOS44NjU2IDI0LjAwODQxMS0zLjY2NTkyIDEuNzE3Mzk0LTcuNjAxMDA2IDIuMjkzNzYtMTIuMzIwMTgzIDAuOTY4NDEyLTUuMDE3Ni0xLjQwNzI2OS0xMS45OTU0MjktNS4yODY3NjYtMjAuNjY3MjQ2LTE0LjU1MjUwM2wtOS42OTg3NDMtMTAuMzU5OTU0LTEwLjY0OTYgOS4zNzY5MTRjLTYuMDQ0NTI2IDUuMzI0OC0xNS4zODkyNTcgMTAuMjY2MzMxLTIzLjg4NTUzMSAxMC4zMjc3NzFhMTkuMDkwMjg2IDE5LjA5MDI4NiAwIDAgMS0xMS40MzA3NjYtMy41NDg4OTFjLTMuODU2MDkxLTIuNjg1ODA2LTguNDM0ODM0LTcuNjcxMjIzLTEyLjc1NjExNC0xNi44ODQyOTdsLTYuMjIwMDY5LTEzLjI1MzQ4Ni0xMy4yNDc2MzQgNi4yMjU5MmMtMTAuMTg3MzM3IDQuNzg5Mzk0LTIzLjk5MDg1NyA4LjQ4NDU3MS0zNC4wMjAyMDYgNy4wMDEyMzQtNC41ODE2NjktMC42Nzg3NjYtNy4zNzU3MjYtMi4yNzMyOC05LjE3MjExNC00LjM3OTc5NC0xLjgzMTQ5Ny0yLjE1MzMyNi00LjEyODE4My02LjYxNTA0LTQuMjM2NDM0LTE1LjkxNTg4NnogbTEzNC4zNjM0MjgtMTUxLjkxMTg2MmMtMzEuODAyNTE0LTguMTc3MzcxLTU4Ljc5ODA4LTcuMjA4OTYtODEuMzQwNzA4IDAuOTUwODU3LTIyLjU1NzI1NyA4LjE2ODU5NC0zOS4zODAxMTQgMjMuMDgwOTYtNTEuNTkyMDQ2IDQwLjU5NDI4NS0yNC4wMzQ3NDMgMzQuNDUzMjExLTMxLjA0MTgyOSA3OS45NzQ0LTMwLjY4NzgxNyAxMTAuNzA2MTAzIDAuMTYzODQgMTMuOTUyNzMxIDMuNzE4NTgzIDI1LjczNzUwOSAxMS4yMjAxMTQgMzQuNTQzOTA5IDcuNTM2NjQgOC44NTAyODYgMTcuNTU0Mjg2IDEyLjkyODczMSAyNy4xNTY0OCAxNC4zNTM1NTQgMTIuOTMxNjU3IDEuOTEzNDE3IDI2LjcyMzQ3NC0wLjY5MDQ2OSAzOC4wNjM1NDMtNC40Mjk1MzEgNC41OTYyOTcgNi44MzQ0NjkgOS44NTY3MzEgMTIuMjk5NzAzIDE1Ljc0MzI2OCAxNi40MDQ0OGE0OC4zNDE1NzcgNDguMzQxNTc3IDAgMCAwIDI4LjM2NzcyNiA4LjgwMDU0OGMxMi4xNDE3MTQtMC4wODc3NzEgMjMuMjg4Njg2LTQuNDExOTc3IDMyLjA0MjQyMy05LjY1NDg1NyA4LjA4OTYgNi44MDUyMTEgMTYuMzM0MjYzIDExLjQxNjEzNyAyNC43NDU2OTEgMTMuNzc3MTg5IDExLjk4OTU3NyAzLjM2MTY0NiAyMy4xMjE5MiAxLjgxMTAxNyAzMi42MzYzNDMtMi42NDc3NzIgMTIuODQzODg2LTYuMDE4MTk0IDIyLjI4MjI0LTE3LjAzMzUwOSAyOC41MzQ0OTItMjcuNDg0MTYgMTYuMzcyMjk3IDMuNTA3OTMxIDMwLjA1NTg2MyAwLjgxMDQyMyA0MC44MTY2NC03LjMxNDI4NSAxMi4xNjgwNDYtOS4xODk2NjkgMTcuNTA0NTQ5LTIzLjIzODk0OSAyMC4zMjc4NjMtMzIuMDU5OTc4IDIuNDg2ODU3LTcuNzc2NTQ5IDIuMTQxNjIzLTE5LjU1MjU0OS0wLjMyNDc1NS0zMS43NTg2MjgtMi42MDY4MTEtMTIuOTExMTc3LTcuOTkzMDUxLTI4LjM2NzcyNi0xNy41ODA2MTctNDQuMTcyNDM0LTE5LjM2MjM3Ny0zMS45MjgzMi01NS4zODM3NzEtNjQuNDczOTY2LTExOC4xMjg2NC04MC42MDkyOHoiIGZpbGw9IiM3QzQwMDAiIHAtaWQ9IjE3MjEiPjwvcGF0aD48cGF0aCBkPSJNNzAyLjgyMzg2MyA3NzMuMjAxOTJjMTAuMTk5MDQtMTAuMzY4NzMxIDE4LjYyNTA5Ny0xOC45NDEwNzQgNDYuNzIwNzMxLTUuOTQyMTI2IDE0LjI4MzMzNyA2LjYwOTE4OSAyNi43NjQ0MzQgNC42MTM4NTEgMzguODIxMzAzIDIuNjg4NzMyIDEyLjA1Mzk0My0xLjkyNTEyIDIzLjY4MzY1Ny0zLjc4Mjk0OSAzNi4yNzMwMDYgMy4wOTI0OCAxMC4xMDI0OTEgNS41MjA4MjMgMTQuMTE2NTcxIDEzLjU2MzYxMSAxOC4yOTQ0OTEgMjEuOTMxMTU0IDUuMTgxNDQgMTAuMzgwNDM0IDEwLjYxNDQ5MSAyMS4yNjcwMTcgMjguMjMwMjE3IDI4LjQ2NDI3NCAzMi41OTI0NTcgMTMuMzE0OTI2IDQyLjQ0NjI2MyA0Mi4xMzAyODYgMzcuNTQ4NjE4IDcxLjA0NTEyLTQuODk3NjQ2IDI4LjkxNDgzNC02OC41NjQxMTQgMTIxLjQ0MDU0OS0xNzQuNjc2ODQ2IDk1LjgzMTc3Mi0xMDYuMTEyNzMxLTI1LjYxMTcwMy0xMjQuNzA4NTcxLTEwNS4wNzExNzctMTE0LjA5NzAwNi0xNDcuMjA0Mzg5IDguMjEyNDgtMzIuNjA3MDg2IDI1LjM1NDI0LTM5LjUxNDY5NyA0Ni43NzMzOTQtNDguMTQyNjI4IDYuMjU1MTc3LTIuNTE5MDQgMTIuODc2MDY5LTUuMTg3MjkxIDE5Ljc0NTY0Ni04LjY4NjQ0NiA3LjAyNzU2Ni0zLjU3ODE0OSAxMS44Njk2MjMtOC41MDIxMjYgMTYuMzY2NDQ2LTEzLjA3Nzk0M3ogbS01MDIuOTAxMDI5IDE4OS42NTM1NzdjLTIwLjU5NzAyOSA5LjcxMDQ0Ni02MS45MDgxMTQgMTguNDY3MTA5LTYyLjQwNTQ4NS0yNC4xNjY0LTAuNjE0NC01My4yOTE4ODYgMjQuNzE2NDM0LTE1NC4yOTkyNDYgMTMyLjgzNjIwNS0xMjYuNDE0MjYzIDEwOC4xMjI2OTcgMjcuODg0OTgzIDExOS44NjA2NjMgMTEwLjkyMjYwNiAxMTQuOTE5MTMyIDEyNi40MTQyNjMtNC45NDQ0NTcgMTUuNDkxNjU3LTE1LjQ0Nzc3MSAzNy4xNzk5NzctNTAuMDQ0MzQzIDI0LjE2NjQtOC40NDM2MTEgMjAuNjU1NTQzLTM0LjM1MzczNyA1Mi4zMDI5OTQtNzAuNDMzNjQ2IDEzLjYzMzgyOS0xMy43OTc2NjkgMTIuMTg1Ni00Ni4wOTE3MDMgMjYuNTIxNi02NC44NzQ3ODgtMTMuNjMzODI5eiIgZmlsbD0iI0ZGRkZGRiIgcC1pZD0iMTcyMiI+PC9wYXRoPjxwYXRoIGQ9Ik03MDYuNTYgODQ4LjQ1NzE0M2ExOS4wMTcxNDMgMTkuMDE3MTQzIDAgMSAwIDAtMzguMDM0Mjg2IDE5LjAxNzE0MyAxOS4wMTcxNDMgMCAwIDAgMCAzOC4wMzQyODZ6IG03My4xNDI4NTcgOC43NzcxNDNhMTkuMDE3MTQzIDE5LjAxNzE0MyAwIDEgMCAwLTM4LjAzNDI4NiAxOS4wMTcxNDMgMTkuMDE3MTQzIDAgMCAwIDAgMzguMDM0Mjg2eiBtOTguMDExNDI5IDE5LjAxNzE0M2ExOS4wMTcxNDMgMTkuMDE3MTQzIDAgMSAxLTM4LjAzNDI4NiAwIDE5LjAxNzE0MyAxOS4wMTcxNDMgMCAwIDEgMzguMDM0Mjg2IDB6IG0tMTM0LjQ2MjkwMyA4NS4zOTI4MjJjMzkuNDMyNzc3IDkuNTk5MjY5IDc2LjIwOTAwNi0yLjM3NTY4IDgyLjE0MjM1NC0yNi43NDY4OCA1LjkzMzM0OS0yNC4zNzEyLTIxLjIyMzEzMS01MS45MTA5NDktNjAuNjUyOTgzLTYxLjUxMzE0Mi0zOS40MzI3NzctOS41OTkyNjktNzYuMjA5MDA2IDIuMzc1NjgtODIuMTQyMzU0IDI2Ljc0Njg4LTUuOTMzMzQ5IDI0LjM3NDEyNiAyMS4yMjMxMzEgNTEuOTEzODc0IDYwLjY1Mjk4MyA2MS41MTMxNDJ6IiBmaWxsPSIjRkY4RjhFIiBwLWlkPSIxNzIzIj48L3BhdGg+PHBhdGggZD0iTTE5Mi4yMTM1NzcgMzc2LjgzNzg1MWMtMjEuOTMxMTU0IDAuNzY2NTM3LTE2LjgxNzAwNi0yMzUuMjYyNTM3IDU0LjczMTMzNy0yMzQuNjUxMDYyIDExLjc2MTM3MSAwLjg4NjQ5MSAxMDIuMzI5NzgzIDc5Ljg1MTUyIDk5LjQ5NzY5MiAxMDIuNDIwNDgtMS42MTQ5OTQgMTIuODczMTQzLTM2Ljg2NCAzOS4yOTIzNDMtNzUuMjQzNTIgNjguMDU3OTY1LTI4Ljg4ODUwMyAyMS42NTMyMTEtNTkuNTUyOTE0IDQ0LjYzNDY5Ny03OC45ODU1MDkgNjQuMTcyNjE3eiBtNjI3Ljc3MDUxNCA0LjU2MTE4OWMyMS45MjgyMjkgMC43NjY1MzcgMTYuODE3MDA2LTIzNS4yNjU0NjMtNTQuNzMxMzM3LTIzNC42NTEwNjMtMTEuNzY0Mjk3IDAuODg2NDkxLTEwMi4zMjk3ODMgNzkuODUxNTItOTkuNDk3NjkxIDEwMi40MTc1NTQgMS42MTQ5OTQgMTIuODc2MDY5IDM2Ljg2NCAzOS4yOTIzNDMgNzUuMjQzNTIgNjguMDYwODkyIDI4Ljg4ODUwMyAyMS42NTMyMTEgNTkuNTUyOTE0IDQ0LjYzNDY5NyA3OC45ODU1MDggNjQuMTcyNjE3eiIgZmlsbD0iI0ZGRkZGRiIgcC1pZD0iMTcyNCI+PC9wYXRoPjwvc3ZnPg=='; // 仅示例
          const svgLogoUri = `data:image/svg+xml;base64,${svgLogoBase64}`;
          md.appendMarkdown(`测试-HTML-Base64SVG: <img src="${svgLogoUri}" width="100" height="100" style="vertical-align:middle;"/>\n`);
        }
        return new vscode.Hover(md, range);
      }
    }
  );
  context.subscriptions.push(hoverProvider);
}

export function deactivate() {}
